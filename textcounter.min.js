/*!
* jQuery Text Counter Plugin v0.3.3
* https://github.com/ractoon/jQuery-Text-Counter
*
* Copyright 2014 ractoon
* Released under the MIT license
*/
!function($){$.textcounter=function(el,options){var base=this;base.$el=$(el),base.el=el,base.$el.data("textcounter",base),base.init=function(){base.options=$.extend({},$.textcounter.defaultOptions,options);var counterText=base.options.countDown?base.options.countDownText:base.options.counterText,counterNum=base.options.countDown?base.options.max:0;base.$el.after("<"+base.options.countContainerElement+' class="'+base.options.countContainerClass+'">'+counterText+'<span class="'+base.options.textCountClass+'">'+counterNum+"</span></"+base.options.countContainerElement+">"),base.$el.bind("keyup.textcounter click.textcounter blur.textcounter focus.textcounter change.textcounter paste.textcounter",base.checkLimits).trigger("click.textcounter"),base.options.init(base.el)},base.checkLimits=function(e){var $this=base.$el,$text=($this.next("."+base.options.countContainerClass),$this.val()),textCount=0,textTotalCount=0,eventTriggered=void 0===e.originalEvent?!1:!0;if(!$.isEmptyObject($text))if("word"==base.options.type)textCount=$text.trim().replace(/\s+/gi," ").split(" ").length;else if(textCount=base.options.countSpaces?$text.replace(/[^\S\n|\r|\r\n]/g," ").length:$text.replace(/\s/g,"").length,base.options.countExtendedCharacters){var extended=$text.match(/[^\x00-\xff]/gi);textCount=null==extended?$text.length:$text.length+extended.length}if("auto"==base.options.max){var max=base.$el.attr("maxlength");"undefined"!=typeof max&&max!==!1?base.options.max=max:base.$el.next("."+base.options.countContainerClass).text("error: [maxlength] attribute not set")}if(textTotalCount=base.options.countDown?base.options.max-textCount:textCount,base.setCount(textTotalCount),base.options.min>0&&eventTriggered&&(textCount<base.options.min?base.setErrors("min"):textCount>=base.options.min&&(base.options.mincount(base.el),base.clearErrors("min"))),-1!==base.options.max)if(textCount>=base.options.max&&0!=base.options.max)if(base.options.maxcount(base.el),base.options.stopInputAtMaximum){var trimmedString="";if("word"==base.options.type)for(var wordArray=$text.split(/[^\S\n]/g),i=0;i<wordArray.length&&!(i>=base.options.max-1);)void 0!==wordArray[i]&&(trimmedString+=wordArray[i]+" ",i++);else if(base.options.countSpaces)trimmedString=$text.substring(0,base.options.max);else for(var charArray=$text.split(""),totalCharacters=charArray.length,charCount=0,i=0;charCount<base.options.max&&totalCharacters>i;)" "!==charArray[i]&&charCount++,trimmedString+=charArray[i++];$this.val(trimmedString.trim()),textTotalCount=base.options.countDown?0:base.options.max,base.setCount(textTotalCount)}else base.setErrors("max");else base.clearErrors("max")},base.setCount=function(count){var $this=base.$el,$countEl=$this.next("."+base.options.countContainerClass);$countEl.children("."+base.options.textCountClass).text(count)},base.setErrors=function(type){var $this=base.$el,$countEl=$this.next("."+base.options.countContainerClass);if($this.addClass(base.options.inputErrorClass),$countEl.addClass(base.options.counterErrorClass),base.options.displayErrorText){switch(type){case"min":errorText=base.options.minimumErrorText;break;case"max":errorText=base.options.maximumErrorText}$countEl.children(".error-text-"+type).length||$countEl.append("<"+base.options.errorTextElement+' class="error-text error-text-'+type+'">'+errorText+"</"+base.options.errorTextElement+">")}},base.clearErrors=function(type){var $this=base.$el,$countEl=$this.next("."+base.options.countContainerClass);$countEl.children(".error-text-"+type).remove(),0==$countEl.children(".error-text").length&&($this.removeClass(base.options.inputErrorClass),$countEl.removeClass(base.options.counterErrorClass))},base.init()},$.textcounter.defaultOptions={type:"character",min:0,max:200,countContainerElement:"div",countContainerClass:"text-count-wrapper",textCountClass:"text-count",inputErrorClass:"error",counterErrorClass:"error",counterText:"Total Count: ",errorTextElement:"div",minimumErrorText:"Minimum not met",maximumErrorText:"Maximum exceeded",displayErrorText:!0,stopInputAtMaximum:!0,countSpaces:!1,countDown:!1,countDownText:"Remaining: ",countExtendedCharacters:!1,maxcount:function(el){},mincount:function(el){},init:function(el){}},$.fn.textcounter=function(options){return this.each(function(){new $.textcounter(this,options)})}}(jQuery);